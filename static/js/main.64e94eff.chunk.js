(window["webpackJsonpweather-forecast"]=window["webpackJsonpweather-forecast"]||[]).push([[0],{29:function(e,t,n){e.exports=n(60)},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),o=n(6),u=n(9),s=n.n(u),l=n(11),m=n(12),p=n(5),d=n.n(p),f=n(4),E=n(27),v=n(16),N=n(28),h=n(8),w="undefined"!==typeof Storage&&window.sessionStorage,O=function(e){return e.reduce((function(e,t){return e+t}))/e.length},y=function(e){var t=e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),n=Math.max.apply(Math,Object(f.a)(Object.values(t))),a=Object.keys(t).filter((function(e){return t[e]===n}));return a&&a[0]},g={unit:"\xb0C",convert:function(e){return e-273.15}},S={unit:"\xb0F",convert:function(e){return 9*e/5-459.67}},b={unit:"kph",convert:function(e){return e/1e3*3600}},_={unit:"mph",convert:function(e){return e/1e3*3600/1.609344}},D=function(e){if(!w)return null;var t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){return null}},M=function(e,t){w&&window.sessionStorage.setItem(e,JSON.stringify(t))},x=Object(h.b)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"IDLE",t=arguments.length>1?arguments[1]:void 0,n=t.type;t.data;return"LOADING"===n||"SEARCH_FOUND"===n||"SEARCH_NOT_FOUND"===n||"SEARCH_FAILED"===n?n:e},units:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{temperature:g,windSpeed:b},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"TEMPERATURE_UNIT_CHANGE":return{temperature:a,windSpeed:e.windSpeed};case"WIND_SPEED_UNIT_CHANGE":return{temperature:e.temperature,windSpeed:a};default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"SEARCH_FOUND":return a.city;case"SEARCH_NOT_FOUND":case"SEARCH_FAILED":return null;default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"SEARCH_FOUND":return a.forecast;case"SEARCH_NOT_FOUND":case"SEARCH_FAILED":return[];default:return e}}}),A=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),C=Object(h.c)(x,A),j=C.dispatch,T=C;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=["Sun","Mon","Tues","Wed","Thur","Fri","Sat"],H=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],F=function(e){var t=Math.round(e/360*H.length);return H[t%H.length]},k=function(e){var t=e.list,n=Object(v.a)(e,["list"]);return R({tempMin:Math.min.apply(Math,Object(f.a)(t.map((function(e){return e.tempMin})))),tempMax:Math.max.apply(Math,Object(f.a)(t.map((function(e){return e.tempMax})))),condition:y(t.map((function(e){return e.condition}))),icon:y(t.map((function(e){return e.icon}))).replace("n@2x","d@2x"),wind:{direction:F(O(t.map((function(e){return e.wind.degree})))),speed:O(t.map((function(e){return e.wind.speed})))},list:t},n)},P=function(e){for(var t=e.city,n=e.list,a=[],r=null,c=null,i=0;i<n.length;i++){var o=n[i],u=o.main,s=o.weather,l=o.wind,m=o.dt,p=new Date(1e3*(m+t.timezone)),d=U[p.getUTCDay()];r!==d&&(c&&a.push(k(c)),r=d,c={day:d,list:[]}),c.list.push({day:d,datetime:p,tempMin:u.temp_min,tempMax:u.temp_max,condition:s[0].main,icon:"".concat("https://openweathermap.org/img/wn","/").concat(s[0].icon,"@2x.png"),wind:{degree:l.deg,direction:F(l.deg),speed:l.speed}})}return c&&a.push(k(c)),{city:t,forecast:a}},W=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,r,c,i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j({type:"LOADING"}),!(n=D(t))){e.next=10;break}if(a=n.expiry,r=Object(v.a)(n,["expiry"]),!(a<=(new Date).getTime())){e.next=8;break}u=t,w&&window.sessionStorage.removeItem(u),e.next=10;break;case 8:return j({type:"SEARCH_FOUND",data:P(r)}),e.abrupt("return");case 10:return e.prev=10,e.next=13,Object(N.get)("".concat("https://api.openweathermap.org/data/2.5/forecast","?q=").concat(t,"&APPID=").concat("d614b4ae2c96616c63156e819bd878d4"));case 13:c=e.sent,i=c.data,(o=new Date).setHours(o.getHours()+Math.ceil(o.getMinutes()/60)),o.setMinutes(0),o.setSeconds(0),M(t,R({},i,{expiry:o.getTime()})),j({type:"SEARCH_FOUND",data:P(i)}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),e.t0.response&&404===e.t0.response.status?j({type:"SEARCH_NOT_FOUND"}):j({type:"SEARCH_FAILED",data:e.t0});case 26:case"end":return e.stop()}var u}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}(),L=(n(57),Object(o.b)((function(e){return e.units}))((function(e){var t=e.temperature,n=e.windSpeed,c=e.dispatch,i=Object(a.useState)(""),o=Object(m.a)(i,2),u=o[0],p=o[1],f=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!u){e.next=4;break}return e.next=4,W(encodeURIComponent(u));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{className:"search-bar",onSubmit:function(e){return f(e)}},r.a.createElement("input",{type:"text",placeholder:"Your city name",onChange:function(e){var t=e.target;return p(t.value.trim())}}),r.a.createElement("button",{type:"submit",disabled:0===u.length},"Search")),r.a.createElement("div",{className:"temperature-unit"},r.a.createElement("span",{className:d()({active:g.unit===t.unit}),onClick:function(){return c({type:"TEMPERATURE_UNIT_CHANGE",data:g})}},g.unit)," ","|"," ",r.a.createElement("span",{className:d()({active:S.unit===t.unit}),onClick:function(){return c({type:"TEMPERATURE_UNIT_CHANGE",data:S})}},S.unit)),r.a.createElement("div",{className:"wind-speed-unit"},r.a.createElement("span",{className:d()({active:b.unit===n.unit}),onClick:function(){return c({type:"WIND_SPEED_UNIT_CHANGE",data:b})}},b.unit)," ","|"," ",r.a.createElement("span",{className:d()({active:_.unit===n.unit}),onClick:function(){return c({type:"WIND_SPEED_UNIT_CHANGE",data:_})}},_.unit)))}))),G=(n(58),Object(o.b)((function(e){return e.units}))((function(e){var t=e.temperature,n=e.windSpeed,a=e.icon,c=e.condition,i=e.tempMax,o=e.tempMin,u=e.wind;return r.a.createElement("div",null,r.a.createElement("img",{className:"forecast-image",src:a,alt:"condition"}),r.a.createElement("div",{className:"forecast-condition"},c),r.a.createElement("div",{className:"forecast-temperature"},r.a.createElement("div",{className:"forecast-temperature-title"},"Temperature"),r.a.createElement("span",{className:"forecast-temp-max"},t.convert(i).toFixed(1),t.unit)," ",r.a.createElement("span",{className:"forecast-temp-min"},t.convert(o).toFixed(1),t.unit)),r.a.createElement("div",{className:"forecast-wind"},r.a.createElement("div",{className:"forecast-wind-speed-title"},"Wind"),r.a.createElement("span",{className:"forecast-wind-speed"},n.convert(u.speed).toFixed(1))," ",r.a.createElement("span",{className:"forecast-wind-speed-unit"},n.unit)," ",r.a.createElement("span",{className:"forecast-wind-direction"},u.direction)))}))),J=Object(o.b)((function(e){return e}))((function(e){var t=e.status,n=(e.units,e.city),c=e.forecast,i=Object(a.useState)(0),o=Object(m.a)(i,2),u=o[0],s=o[1],l=c[u]&&c[u].day||null,p=c.filter((function(e,t){return t<5})).map((function(e){return e.list})).reduce((function(e,t){return e.concat(t)}),[]),E=20*Math.min.apply(Math,Object(f.a)(p.map((function(e){return e.tempMin})))),v=20*Math.max.apply(Math,Object(f.a)(p.map((function(e){return e.tempMax})))),N=v-E,h=c.filter((function(e,t){return t<u})).map((function(e){return e.list.length})).reduce((function(e,t){return e+t}),0),w=p.map((function(e,t){var n=e.tempMax;return"".concat(50+100*t,",").concat(E+v-20*n)})).join(" ");switch(Object(a.useEffect)((function(){return s(0)}),[c]),t){case"SEARCH_FOUND":return r.a.createElement("div",{className:"forecast"},r.a.createElement("div",{className:"city"},n.name,", ",n.country),r.a.createElement("div",{className:"five-day-forecast"},c.map((function(e,t){var n=e.day,a=e.icon,c=e.condition,i=e.tempMax,o=e.tempMin,l=e.wind;return r.a.createElement("div",{className:d()("day-forecast",{active:u===t}),key:n,onClick:function(){return s(t)}},r.a.createElement("div",{className:"forecast-title"},n),r.a.createElement(G,{icon:a,condition:c,tempMax:i,tempMin:o,wind:l}))}))),r.a.createElement("div",{className:"three-hour-forecast",style:{left:"-".concat(12.5*h,"%")}},p.map((function(e){var t=e.tempMin,n=e.tempMax,a=e.day,c=e.datetime,i=e.wind,o=e.condition,u=e.icon;return r.a.createElement("div",{className:d()("hour-forecast",{active:l===a}),key:c},r.a.createElement("div",{className:"forecast-title"},function(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),a=t>=12?"pm":"am";return n=n<10?"0"+n:n,"".concat(t=t>12?t%12:0===t?12:t,":").concat(n," ").concat(a)}(c)),r.a.createElement(G,{icon:u,condition:o,tempMax:n,tempMin:t,wind:i}))})),r.a.createElement("svg",{className:"three-hour-forecast-graph",viewBox:"0 ".concat(E-40,"\n                ").concat(100*p.length," ").concat(N+80),width:"".concat(100*p.length/8,"%"),height:"100%",preserveAspectRatio:"none"},r.a.createElement("polyline",{points:w}),r.a.createElement("polygon",{points:"50,".concat(v+40,"\n                  ").concat(w," ").concat(50+100*(p.length-1),",\n                  ").concat(v+40)}))));case"SEARCH_NOT_FOUND":return r.a.createElement("div",{className:"search-message"},"City not found");case"SEARCH_FAILED":return r.a.createElement("div",{className:"search-message"},"Search failed");case"LOADING":return r.a.createElement("div",{className:"search-loading"});default:return r.a.createElement("div",{className:"search-message"},"Search a city")}}));n(59);i.a.render(r.a.createElement((function(){return r.a.createElement(o.a,{store:T},r.a.createElement(L,null),r.a.createElement(J,null))}),null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.64e94eff.chunk.js.map