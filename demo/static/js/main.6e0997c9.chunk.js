(window["webpackJsonpweather-forecast"]=window["webpackJsonpweather-forecast"]||[]).push([[0],{29:function(e,t,n){e.exports=n(60)},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),u=n(5),o=n(8),s=n.n(o),l=n(11),m=n(12),d=n(4),p=n.n(d),f=n(9),E=n(27),N=n(16),v=n(28),h=n(7),w="undefined"!==typeof Storage&&window.sessionStorage,O=function(e){var t=e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{}),n=Math.max.apply(Math,Object(f.a)(Object.values(t))),a=Object.keys(t).filter((function(e){return t[e]===n}));return a&&a[0]},y={unit:"\xb0C",convert:function(e){return(e-273.15).toFixed(2)}},S={unit:"\xb0F",convert:function(e){return(9*e/5-459.67).toFixed(2)}},b={unit:"kph",convert:function(e){return(e/1e3*3600).toFixed(2)}},g={unit:"mph",convert:function(e){return(e/1e3*3600/1.609344).toFixed(2)}},_=function(e){if(!w)return null;var t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){return null}},D=function(e,t){w&&window.sessionStorage.setItem(e,JSON.stringify(t))},x=Object(h.b)({status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"IDLE",t=arguments.length>1?arguments[1]:void 0,n=t.type;t.data;return"LOADING"===n||"SEARCH_FOUND"===n||"SEARCH_NOT_FOUND"===n||"SEARCH_FAILED"===n?n:e},units:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{temperature:y,windSpeed:b},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"TEMPERATURE_UNIT_CHANGE":return{temperature:a,windSpeed:e.windSpeed};case"WIND_SPEED_UNIT_CHANGE":return{temperature:e.temperature,windSpeed:a};default:return e}},city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"SEARCH_FOUND":return a.city;case"SEARCH_NOT_FOUND":case"SEARCH_FAILED":return null;default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.data;switch(n){case"SEARCH_FOUND":return a.forecast;case"SEARCH_NOT_FOUND":case"SEARCH_FAILED":return[];default:return e}}}),A=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),C=Object(h.c)(x,A),M=C.dispatch,j=C;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=["Sun","Mon","Tues","Wed","Thur","Fri","Sat"],H=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],R=function(e){var t=Math.round(e/360*H.length);return H[t%H.length]},F=function(e){var t=e.list,n=Object(N.a)(e,["list"]);return I({tempMin:Math.min.apply(Math,Object(f.a)(t.map((function(e){return e.tempMin})))),tempMax:Math.max.apply(Math,Object(f.a)(t.map((function(e){return e.tempMax})))),condition:O(t.map((function(e){return e.condition}))),icon:O(t.map((function(e){return e.icon}))).replace("n@2x","d@2x"),wind:{direction:O(t.map((function(e){return e.wind.direction}))),speed:(t.map((function(e){return e.wind.speed})).reduce((function(e,t){return e+t}))/t.length).toFixed(2)},list:t},n)},k=function(e){for(var t=e.city,n=e.list,a=[],r=null,c=null,i=0;i<n.length;i++){var u=n[i],o=u.main,s=u.weather,l=u.wind,m=u.dt,d=new Date(1e3*(m+t.timezone)),p=U[d.getUTCDay()];r!==p&&(c&&a.push(F(c)),r=p,c={day:p,list:[]}),c.list.push({day:p,datetime:d,tempMin:o.temp_min,tempMax:o.temp_max,condition:s[0].main,icon:"".concat("https://openweathermap.org/img/wn","/").concat(s[0].icon,"@2x.png"),wind:{direction:R(l.deg),speed:l.speed}})}return c&&a.push(F(c)),{city:t,forecast:a}},P=function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,r,c,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M({type:"LOADING"}),!(n=_(t))){e.next=10;break}if(a=n.expiry,r=Object(N.a)(n,["expiry"]),!(a<=(new Date).getTime())){e.next=8;break}o=t,w&&window.sessionStorage.removeItem(o),e.next=10;break;case 8:return M({type:"SEARCH_FOUND",data:k(r)}),e.abrupt("return");case 10:return e.prev=10,e.next=13,Object(v.get)("".concat("https://api.openweathermap.org/data/2.5/forecast","?q=").concat(t,"&APPID=").concat("d614b4ae2c96616c63156e819bd878d4"));case 13:c=e.sent,i=c.data,(u=new Date).setHours(u.getHours()+Math.ceil(u.getMinutes()/60)),u.setMinutes(0),u.setSeconds(0),D(t,I({},i,{expiry:u.getTime()})),M({type:"SEARCH_FOUND",data:k(i)}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),e.t0.response&&404===e.t0.response.status?M({type:"SEARCH_NOT_FOUND"}):M({type:"SEARCH_FAILED",data:e.t0});case 26:case"end":return e.stop()}var o}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}(),W=(n(57),Object(u.b)((function(e){return e.units}))((function(e){var t=e.temperature,n=e.windSpeed,c=e.dispatch,i=Object(a.useState)(""),u=Object(m.a)(i,2),o=u[0],d=u[1],f=function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!o){e.next=4;break}return e.next=4,P(encodeURIComponent(o));case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{className:"search-bar",onSubmit:function(e){return f(e)}},r.a.createElement("input",{type:"text",placeholder:"Your city name",onChange:function(e){var t=e.target;return d(t.value.trim())}}),r.a.createElement("button",{type:"submit",disabled:0===o.length},"Search")),r.a.createElement("div",{className:"temperature-unit"},r.a.createElement("span",{className:p()({active:y.unit===t.unit}),onClick:function(){return c({type:"TEMPERATURE_UNIT_CHANGE",data:y})}},y.unit)," ","|"," ",r.a.createElement("span",{className:p()({active:S.unit===t.unit}),onClick:function(){return c({type:"TEMPERATURE_UNIT_CHANGE",data:S})}},S.unit)),r.a.createElement("div",{className:"wind-speed-unit"},r.a.createElement("span",{className:p()({active:b.unit===n.unit}),onClick:function(){return c({type:"WIND_SPEED_UNIT_CHANGE",data:b})}},b.unit)," ","|"," ",r.a.createElement("span",{className:p()({active:g.unit===n.unit}),onClick:function(){return c({type:"WIND_SPEED_UNIT_CHANGE",data:g})}},g.unit)))}))),L=(n(58),Object(u.b)((function(e){return e.units}))((function(e){var t=e.temperature,n=e.windSpeed,a=e.icon,c=e.condition,i=e.tempMax,u=e.tempMin,o=e.wind;return r.a.createElement("div",null,r.a.createElement("img",{className:"forecast-image",src:a,alt:"condition"}),r.a.createElement("div",{className:"forecast-condition"},c),r.a.createElement("div",{className:"forecast-temperature"},r.a.createElement("div",{className:"forecast-temperature-title"},"Temperature"),r.a.createElement("span",{className:"forecast-temp-max"},t.convert(i),t.unit)," ",r.a.createElement("span",{className:"forecast-temp-min"},t.convert(u),t.unit)),r.a.createElement("div",{className:"forecast-wind"},r.a.createElement("div",{className:"forecast-wind-speed-title"},"Wind"),r.a.createElement("span",{className:"forecast-wind-speed"},n.convert(o.speed))," ",r.a.createElement("span",{className:"forecast-wind-speed-unit"},n.unit)," ",r.a.createElement("span",{className:"forecast-wind-direction"},o.direction)))}))),G=Object(u.b)((function(e){return e}))((function(e){var t,n=e.status,c=(e.units,e.city),i=e.forecast,u=Object(a.useState)(0),o=Object(m.a)(u,2),s=o[0],l=o[1],d=i[s]&&i[s].day||null,f=i.filter((function(e,t){return t<s})).map((function(e){return e.list.length})).reduce((function(e,t){return e+t}),0);switch(Object(a.useEffect)((function(){return l(0)}),[i]),n){case"SEARCH_FOUND":return r.a.createElement("div",{className:"forecast"},r.a.createElement("div",{className:"city"},c.name,", ",c.country),r.a.createElement("div",{className:"five-day-forecast"},i.map((function(e,t){var n=e.day,a=e.icon,c=e.condition,i=e.tempMax,u=e.tempMin,o=e.wind;return r.a.createElement("div",{className:p()("day-forecast",{active:s===t}),key:n,onClick:function(){return l(t)}},r.a.createElement("div",{className:"forecast-title"},n),r.a.createElement(L,{icon:a,condition:c,tempMax:i,tempMin:u,wind:o}))}))),r.a.createElement("div",{className:"three-hour-forecast",style:{left:"-".concat(12.5*f,"%")}},(t=i.map((function(e){return e.list})),t.reduce((function(e,t){return e.concat(t)}),[])).map((function(e){var t=e.tempMin,n=e.tempMax,a=e.day,c=e.datetime,i=e.wind,u=e.condition,o=e.icon;return r.a.createElement("div",{className:p()("hour-forecast",{active:d===a}),key:c},r.a.createElement("div",{className:"forecast-title"},function(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),a=t>=12?"pm":"am";return n=n<10?"0"+n:n,"".concat(t=t>12?t%12:0===t?12:t,":").concat(n," ").concat(a)}(c)),r.a.createElement(L,{icon:o,condition:u,tempMax:n,tempMin:t,wind:i}))}))));case"SEARCH_NOT_FOUND":return r.a.createElement("div",{className:"search-message"},"City not found");case"SEARCH_FAILED":return r.a.createElement("div",{className:"search-message"},"Search failed");case"LOADING":return r.a.createElement("div",{className:"search-loading"});default:return r.a.createElement("div",{className:"search-message"},"Search a city")}}));n(59);i.a.render(r.a.createElement((function(){return r.a.createElement(u.a,{store:j},r.a.createElement(W,null),r.a.createElement(G,null))}),null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.6e0997c9.chunk.js.map